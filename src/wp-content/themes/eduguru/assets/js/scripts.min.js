jQuery(function ($) {
    $(".btn--load").on("click", function () {
        const button = $(this);
        button.find('.loadmore').text("Загрузка...");

        const data = {
            "action": "load_more",
            "query": button.data("param-posts"),
            "page": current_page,
            "tpl": button.data("tpl")
        }
        console.log(data);
        $.ajax({
            url: "/wp-admin/admin-ajax.php",
            data: data,
            type: "POST",
            success: function (data) {
                console.log(data);
                if (data) {
                    button.find('.loadmore').text("показать больше");
                    button.prev('.cards.container').append(data);
                    current_page++;
                    if (current_page == button.attr("data-max-pages")) {
                        button.remove();
                        console.log('ok');
                    }
                } else {
                    //button.remove();
                    console.log('else');
                }
            }
        });
    });
});
jQuery(function ($) {
    $('.more_btn').on('change', moreToggle);
        function moreToggle(e) {

            let label = $(this).find('label');

            let hide =  'скрыть'
            if($(label).attr('for') == 'filter_more'){
                show = 'показать больше параметров';
                wrap = $(this).closest('.filter').find('.filter_items');
            }else{
                show = 'показать больше';
                wrap = $(this).closest('.card').find('.detail');
            }
            
            $(wrap).toggleClass('show')?$(label).text(hide) : $(label).text(show);
        }
    });
